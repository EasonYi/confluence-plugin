<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-114996686-1"></script>
    <script type="text/javascript" src="js/google-analytics.js"></script>

    <meta charset="utf-8">
    <style>
        .gutter {
            background-color: #eee;
            background-repeat: no-repeat;
            background-position: 50%;
        }

        .gutter.gutter-vertical {
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFAQMAAABo7865AAAABlBMVEVHcEzMzMzyAv2sAAAAAXRSTlMAQObYZgAAABBJREFUeF5jOAMEEAIEEFwAn3kMwcB6I2AAAAAASUVORK5CYII=')
        }

        .gutter.gutter-horizontal {
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==');
            cursor: ew-resize;
        }

        .split, .gutter.gutter-horizontal {
            float: left;
        }

        .split, .gutter.gutter-horizontal {
            height: 100%;
        }

        .split {
            overflow-y: auto;
            overflow-x: auto;
        }

        #app {
            height: 480px;
        }
        .hint {
            margin-bottom: 5px;
        }

        #diagram {
            /* This should be the same color as .seq-diagram*/
            background-color: #fafafa;
        }

        #editor {
            margin-top: 5px;
        }

        body {
            background-color: #f5f5f5;
        }

    </style>
    <script type="text/javascript" src="js/util.js"></script>
    <script id="connect-loader">

      function initializeMacro() {
        const initialVersion = 1;
        let macroParams = {param: initialVersion};
        let bodyProperty;

        AP.confluence.getMacroData(data => {
          macroParams = data || macroParams;
          macroParams.uuid = macroParams.uuid || uuidv4();
          macroParams.param = macroParams.param || initialVersion;

          const key = propertyKey(macroParams.uuid);
          bodyProperty = {key: key, value: '', version: {number: 0}};

          AP.confluence.getContentProperty(key, function(property) {
            bodyProperty = property || bodyProperty;

            let body = property && property.value;
            if(!body) {
              AP.confluence.getMacroBody(data => {
                body = data;
              });
            }
            store.commit('code', body || EXAMPLE);
          });
        });

        AP.require(["confluence", "dialog"], function (confluence, dialog) {
          function onSubmit() {
            const macroBody = store.state.code;
            macroParams.param = macroParams.param + 1;
            confluence.saveMacro(macroParams, macroBody);

            bodyProperty.version.number = bodyProperty.version.number + 1;
            bodyProperty.value = macroBody;
            AP.confluence.setContentProperty(bodyProperty, function(result) {
              console.warn(result.error);
            });

            confluence.closeMacroEditor();
            return true;
          }

          dialog.getButton("submit").bind(onSubmit);
        });
      }

      function loadConnect() {
        JavaScript.load(getConnectUrl(), initializeMacro);
      }

      window.onAppLoaded = loadConnect;

      window.split = true;

    </script>
    <script type="text/javascript" src="js/heap.js"></script>
    <link href="css/diagram_lite.css" rel="stylesheet">
<link href="/v1.3.2/css/chunk-vendors.a157c209.css" rel="stylesheet"><link href="/v1.3.2/css/app.d1711d2a.css" rel="stylesheet"></head>
<body>
<div id="app" class="container">
    <workspace></workspace>
</div>
<!-- built files will be auto injected -->
<script type="text/javascript" src="/v1.3.2/js/chunk-vendors.a9c4e9c8.js"></script><script type="text/javascript" src="/v1.3.2/js/app.106d54a4.js"></script></body>
</html>
